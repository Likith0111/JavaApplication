name: CI

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  backend-job-portal:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven
      - name: Build and compile Job Portal backend
        run: mvn -B clean compile -f job-portal/backend/pom.xml

  backend-ecommerce:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven
      - name: Build and test E-Commerce backend
        run: mvn -B clean test-compile -DskipTests -f e-commerce/backend/pom.xml

  backend-food-ordering:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven
      - name: Build and test Food Ordering backend
        run: mvn -B clean test-compile -DskipTests -f food-ordering/backend/pom.xml

  backend-event-booking:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up JDK 17
        uses: actions/setup-java@v4
        with:
          java-version: '17'
          distribution: 'temurin'
          cache: maven
      - name: Build and test Event Booking backend
        run: mvn -B clean test-compile -DskipTests -f event-booking/backend/pom.xml

  frontend-job-portal:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install and build Job Portal frontend
        run: |
          cd job-portal/frontend
          npm install
          npm run build

  frontend-ecommerce:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install and build E-Commerce frontend
        run: |
          cd e-commerce/frontend
          npm install
          npm run build

  frontend-food-ordering:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install and build Food Ordering frontend
        run: |
          cd food-ordering/frontend
          npm install
          npm run build

  frontend-event-booking:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install and build Event Booking frontend
        run: |
          cd event-booking/frontend
          npm install
          npm run build
